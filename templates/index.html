<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>StallFest Mobile</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #FFE4B5;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}
h1, h2 {
    text-align: center;
    margin: 5px 0;
    color: #ff6347;
}
.container {
    padding: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
}
button {
    font-size: 1.1em;
    margin: 3px;
    padding: 10px 12px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    white-space: nowrap;
}
button.selected {
    background-color: #ff69b4;
    color: white;
}
button.winner {
    background-color: #32CD32;
    color: white;
}
button.loser {
    background-color: #FF4500;
    color: white;
}
.message {
    margin: 10px;
    font-size: 1.2em;
    font-weight: bold;
    text-align: center;
    color: #00008B;
}
.game-section {
    border: 2px solid #000;
    border-radius: 15px;
    padding: 8px;
    margin: 8px;
    width: 95%;
}
.flex-buttons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
}
.play-btn {
    background-color: #1E90FF;
    color: white;
    font-size: 1.3em;
    padding: 10px 15px;
    margin-top: 8px;
    width: 95%;
}
a button {
    width: auto;
}
</style>
</head>
<body>
<h1>ðŸŽ¡ StallFest Mobile</h1>
<div class="container">

<div class="message" id="message">{{ message }}</div>

<form method="POST" id="gameForm">

<!-- Game Selection -->
<div class="game-section">
<h2>Choose Game</h2>
<div class="flex-buttons">
{% for g, label in [('20','20â‚¹ Coin Game'),('Battle','Battle Game 220â‚¹'),('150','Bottle Game 150â‚¹'),('250','Jackpot 250â‚¹'),('Money','Money Game 100â‚¹')] %}
<button type="button" onclick="selectGame('{{g}}', this)">{{label}}</button>
{% endfor %}
</div>
</div>

<!-- Result Selection -->
<div class="game-section" id="resultSection" style="display:none;">
<h2>Result</h2>
<div class="flex-buttons">
<button type="button" onclick="selectResult('Win', this)">Win</button>
<button type="button" onclick="selectResult('Lose', this)">Lose</button>
</div>
</div>

<!-- Winner Prize -->
<div class="game-section" id="winnerSection" style="display:none;">
<h2>Winner Prize</h2>
<div class="flex-buttons">
{% for item in inventory %}
<button type="button" onclick="selectWinner('{{item}}', this)">{{item}} ({{inventory[item]['qty']}})</button>
{% endfor %}
</div>
</div>

<!-- Loser Prize -->
<div class="game-section" id="loserSection" style="display:none;">
<h2>Loser Prize</h2>
<div class="flex-buttons">
{% for item in inventory %}
{% if inventory[item]['cp']==27 %}
<button type="button" onclick="selectLoser('{{item}}', this)">{{item}} ({{inventory[item]['qty']}})</button>
{% endif %}
{% endfor %}
<button type="button" onclick="selectLoser('AUTO', this)">Auto 27â‚¹ Prize</button>
</div>
</div>

<!-- Money Game -->
<div class="game-section" id="moneySection" style="display:none;">
<h2>Money Game Balls</h2>
<div class="flex-buttons">
<button type="button" onclick="selectMoney('0', this)">0 Ball</button>
<button type="button" onclick="selectMoney('1', this)">1 Ball</button>
<button type="button" onclick="selectMoney('2', this)">2 Ball</button>
</div>
</div>

<button type="submit" class="play-btn" id="playBtn" style="display:none;">Play Game</button>

<div class="flex-buttons" style="margin-top:8px;">
<a href="/report"><button type="button">View Sales Report</button></a>
</div>

<input type="hidden" name="game" id="gameInput">
<input type="hidden" name="result" id="resultInput">
<input type="hidden" name="winner" id="winnerInput">
<input type="hidden" name="loser" id="loserInput">
<input type="hidden" name="money_ball" id="moneyInput">

</form>
</div>

<script>
let selectedGame="", selectedResult="", selectedWinner="", selectedLoser="", selectedMoney="";

// Function to highlight selected button
function highlightBtn(btn, parentSelector){
    let buttons = document.querySelectorAll(parentSelector + ' button');
    buttons.forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');
}

// Game selection
function selectGame(game, btn){
    selectedGame = game;
    document.getElementById("gameInput").value = game;
    highlightBtn(btn, 'div.flex-buttons');
    document.getElementById("resultSection").style.display = "flex";
    document.getElementById("winnerSection").style.display = "flex";
    document.getElementById("loserSection").style.display = "flex";
    document.getElementById("moneySection").style.display = (game == "Money") ? "flex" : "none";
    document.getElementById("playBtn").style.display = "inline-block";
}

// Result selection
function selectResult(res, btn){
    selectedResult = res;
    document.getElementById("resultInput").value = res;
    highlightBtn(btn, '#resultSection');
}

// Winner selection
function selectWinner(winner, btn){
    selectedWinner = winner;
    document.getElementById("winnerInput").value = winner;
    highlightBtn(btn, '#winnerSection');
}

// Loser selection
function selectLoser(loser, btn){
    selectedLoser = loser;
    document.getElementById("loserInput").value = loser;
    highlightBtn(btn, '#loserSection');
}

// Money game selection
function selectMoney(ball, btn){
    selectedMoney = ball;
    document.getElementById("moneyInput").value = ball;
    highlightBtn(btn, '#moneySection');
}
</script>

</body>
</html>
